{%- if flavor contains "typescript" -%}
import {render} from 'preact';
import type {ShopifyGlobal} from '@shopify/ui-extensions/admin';
import PurchaseOptionsActionExtension from './PurchaseOptionsActionExtension';

// Temp hack for global
const shopify: ShopifyGlobal = {...Reflect.get(globalThis, 'shopify')};

export default shopify.extend('admin.product-variant-purchase-option.action.render', (root, api) => {
  // for now, we are grotesquely manually merging extension APIs into the global:
  Object.defineProperties(shopify, Object.getOwnPropertyDescriptors(api));
  render(<PurchaseOptionsActionExtension />, root);
});
{%- else -%}
import {render} from 'preact';
import PurchaseOptionsActionExtension from './PurchaseOptionsActionExtension';

// Temp hack for global
const shopify = {...Reflect.get(globalThis, 'shopify')};

export default shopify.extend('admin.product-variant-purchase-option.action.render', (root, api) => {
  // for now, we are grotesquely manually merging extension APIs into the global:
  Object.defineProperties(shopify, Object.getOwnPropertyDescriptors(api));
  render(<PurchaseOptionsActionExtension />, root);
});
{%- endif -%}