/// <reference types="@shopify/ui-extensions/admin.settings.order-routing-rule.render" />
import {render} from 'preact';

export default function extension() {
  render(<Extension />, document.body);
}

function Extension() {
  const {data, applyMetafieldsChange, i18n} = shopify;

  // Transform your state into metafields and send them back to the admin to batch the
  // changes together with the rest of merchant updates to the routing strategy
  const handleSubmit = () => {
    console.log('submit');

    {% if flavor contains "typescript" %}
    // const metafields: Parameters<typeof applyMetafieldsChange>[0] = [
    {% else %}
    // const metafields = [
    {% endif %}
    //   {
    //     namespace: 'ns',
    //     key: 'config-1',
    //     type: 'updateMetafield',
    //     value: '{value: test}',
    //     valueType: 'json',
    //   }
    // ];

    // applyMetafieldsChange(metafields);
  };

  // Reset your state to the default values
  const handleOnReset = () => {
    console.log('reset');
  };

  return (
    <s-form onSubmit={handleSubmit} onReset={handleOnReset}>
      <s-box padding="base">
        <s-text type="bold">
          {i18n.translate('helpText')}
        </s-text>
      </s-box>
      <s-box padding="base">
        {/* Create a UI to allow merchants to provide configuration values for your location rule function */}
      </s-box>
    </s-form>
  );
}